<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Arcadia Portal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;background:linear-gradient(120deg,#1e3c72,#2a5298);color:white;font-family:Arial;text-align:center;overflow:hidden}
#menu{height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;
background:url('https://i.imgur.com/2Z9xZ8J.png') center/cover no-repeat}
button{padding:12px 24px;margin:6px;font-size:18px;border-radius:10px;border:none;background:#222;color:#fff}
canvas{display:none;margin:auto;border:3px solid #6cf;background:#000}
h1{font-size:48px;text-shadow:2px 2px 8px black}
</style>
</head>
<body>

<div id="menu">
<h1>Arcadia Portal</h1>
<button onclick="start(1)">Arcadia Quest</button>
<button onclick="start(2)">Astro Dodge</button>
<button onclick="start(3)">Brick Breaker</button>
<button onclick="start(4)">Snake Classic</button>
<button onclick="start(5)">Falling Words</button>
<button onclick="start(6)">Maze Runner</button>
<button onclick="start(7)">Sandbox Realm</button>
<button onclick="start(8)">Side Scroller</button>
</div>

<canvas id="game" width="800" height="450"></canvas>
<br><button onclick="back()">Back</button>

<script>
const canvas=document.getElementById("game"),ctx=canvas.getContext("2d");
let keys={},loopId;
document.addEventListener("keydown",e=>keys[e.key.toLowerCase()]=true);
document.addEventListener("keyup",e=>keys[e.key.toLowerCase()]=false);

function back(){canvas.style.display="none";menu.style.display="flex";cancelAnimationFrame(loopId);}
function start(n){menu.style.display="none";canvas.style.display="block";
if(n===7)sandbox(); if(n===8)side();}

/* ---- SANDBOX REALM (Upgraded) ---- */
function sandbox(){
let size=25,cols=32,rows=18;
let grid=[...Array(rows)].map(()=>Array(cols).fill(0));
let player={x:5,y:5,hp:10,weapon:1};
let mobs=[];
function loop(){
if(keys.w)player.y=Math.max(0,player.y-0.15);
if(keys.s)player.y=Math.min(rows-1,player.y+0.15);
if(keys.a)player.x=Math.max(0,player.x-0.15);
if(keys.d)player.x=Math.min(cols-1,player.x+0.15);

if(keys["1"])player.weapon=1;
if(keys["2"])player.weapon=2;
if(keys["3"])player.weapon=3;
if(keys.b)grid[Math.floor(player.y)][Math.floor(player.x)]=1;
if(keys.n)grid[Math.floor(player.y)][Math.floor(player.x)]=2;
if(keys.m)grid[Math.floor(player.y)][Math.floor(player.x)]=3;
if(keys.c)grid[Math.floor(player.y)][Math.floor(player.x)]=0;

if(Math.random()<0.02)mobs.push({x:Math.random()*cols,y:0,hp:3});
mobs.forEach(m=>m.y+=0.05);

mobs=mobs.filter(m=>{
if(Math.abs(m.x-player.x)<0.5&&Math.abs(m.y-player.y)<0.5){player.hp--;return false;}
return m.y<rows;
});

ctx.clearRect(0,0,800,450);
for(let y=0;y<rows;y++)for(let x=0;x<cols;x++){
if(grid[y][x]===1)ctx.fillStyle="#888";
if(grid[y][x]===2)ctx.fillStyle="#0f0";
if(grid[y][x]===3)ctx.fillStyle="#00f";
if(grid[y][x])ctx.fillRect(x*size,y*size,size,size);
}
ctx.fillStyle="lime";
ctx.fillRect(player.x*size,player.y*size,size,size);
ctx.fillStyle="red";
mobs.forEach(m=>ctx.fillRect(m.x*size,m.y*size,size,size));
ctx.fillStyle="white";
ctx.fillText("HP:"+player.hp+"  Blocks: B/N/M  Clear:C  Weapons:1-3",10,20);
if(player.hp<=0){alert("Defeated");back();}
loopId=requestAnimationFrame(loop);
}
loop();
}

/* ---- SIDE SCROLLER ---- */
function side(){
let p={x:50,y:350,vy:0},g=0.6,obs=[];
function loop(){
if(keys.a)p.x-=3;if(keys.d)p.x+=3;
if(keys.w&&p.y>=350)p.vy=-12;
p.vy+=g;p.y+=p.vy;
if(p.y>350){p.y=350;p.vy=0;}
if(Math.random()<0.02)obs.push({x:800,y:360});
obs.forEach(o=>o.x-=4);
ctx.clearRect(0,0,800,450);
ctx.fillStyle="#113";ctx.fillRect(0,0,800,450);
ctx.fillStyle="lime";ctx.fillRect(p.x,p.y,30,30);
ctx.fillStyle="red";obs.forEach(o=>ctx.fillRect(o.x,o.y,30,30));
obs=obs.filter(o=>o.x>-30);
loopId=requestAnimationFrame(loop);
}
loop();
}
</script>
</body>
</html>
